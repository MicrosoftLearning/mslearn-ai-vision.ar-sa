---
lab:
  title: تحليل الفيديو
  description: استخدم Azure AI Video Indexer لتحليل مقطع فيديو.
---

# تحليل الفيديو

توجد نسبة كبيرة من البيانات التي جرى إنشاؤها واستهلاكها اليوم بتنسيق الفيديو. **فهرس فيديو الذكاء الاصطناعي في Azure** هي خدمة تعمل الذكاء الاصطناعي يمكنك استخدامها لفهرسة مقاطع الفيديو واستخراج نتائج التحليلات منها.

> **ملاحظة**: بداية من 21 يونيو 2022، تقتصر قدرات خدمات الذكاء الاصطناعي في Azure التي ترجع معلومات التعريف الشخصية المقيدة على العملاء الذين حصلوا على [حق وصول محدود](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-limited-access). دون الحصول على موافقة وصول محدودة، لا يتوفر التعرّف على الأشخاص والمشاهير باستخدام فهرس الفيديو لهذا المختبر. لمزيد من التفاصيل حول التغييرات التي أجرتها Microsoft، ولماذا - راجع [استثمارات الذكاء الاصطناعي المسؤول وضماناته للتعرّف على الوجوه](https://azure.microsoft.com/blog/responsible-ai-investments-and-safeguards-for-facial-recognition/).

## تحميل فيديو إلى فهرس الفيديو

أولا، ستحتاج إلى تسجيل الدخول إلى مدخل فهرس فيديو وتحميل فيديو.

1. في متصفحك، افتح [مدخل Video Indexer](https://www.videoindexer.ai) عبر `https://www.videoindexer.ai`.
1. إذا كان لديك حساب فهرس فيديو موجود، فسجل الدخول. وإلا، فسجل للحصول على حساب مجاني وسجل الدخول باستخدام حساب Microsoft الخاص بك (أو أي نوع حساب صالح آخر). إذا واجهت صعوبة في تسجيل الدخول، فحاول فتح جلسة مستعرض خاصة.

    > ملاحظة: إذا كانت هذه هي المرة الأولى التي تسجل فيها الدخول، فقد يظهر نموذج منبثق يطلب منك التحقق من كيفية استخدامك للخدمة. 

1. في علامة تبويب جديدة، يمكنك تنزيل فيديو الذكاء الاصطناعي المسؤول عن طريق زيارة `https://aka.ms/responsible-ai-video`. حفظ الملف.
1. في فهرس الفيديو، حدد خيار **تحميل**. ثم حدد خيار **استعراض بحثاً عن الملفات**، وحدد الفيديو الذي جرى تنزيله، وانقر فوق **إضافة**. غيِّر النص الموجود في الحقل **اسم الملف** إلى **الذكاء الاصطناعي المسؤول**. حدد **مراجعة + تحميل**، وراجع النظرة العامة على الملخص، وحدد خانة الاختيار للتحقق من التوافق مع نُهج Microsoft للتعرف على الأوجه، وحمِّل الملف.
1. بعد تحميل الملف، انتظر بضع دقائق بينما يفهرسه فهرس الفيديو تلقائياً.

> **ملاحظة**: في هذا التمرين، نستخدم هذا الفيديو لاستكشاف وظيفة فهرس الفيديو لكن يجب أن تكرس وقتاً لمشاهدته بالكامل عند الانتهاء من التمرين لأنه يحتوي على معلومات وإرشادات مفيدة لتطوير التطبيقات الممكنة الذكاء الاصطناعي بشكل مسؤول! 

## مراجعة نتائج تحليلات الفيديو

تستخرج عملية الفهرسة نتائج تحليلات من الفيديو يمكنك عرضها في المدخل.

1. في مدخل فهرس الفيديو، عند فهرسة الفيديو، حدده لعرضه. سترى مشغل الفيديو جنباً إلى جنب مع جزء يعرض نتائج التحليلات المستخرجة من الفيديو.

    > **ملاحظة**: نظراً لنهج الوصول المحدود لحماية هويات الأفراد، قد لا ترى الأسماء عند فهرس الفيديو.

    ![فهرس الفيديو مع مشغل فيديو وجزء Insights](../media/video-indexer-insights.png)

1. خلال تشغيل الفيديو، حدد علامة تبويب **المخطط الزمني** لعرض نسخة من صوت الفيديو.

    ![فهرس الفيديو مع مشغل فيديو وجزء المخطط الزمني يعرض نص الفيديو.](../media/video-indexer-transcript.png)

1. في الجزء العلوي الأيسر من البوابة الإلكترونية، حدد رمز **العرض** (الذي يشبه &#128455;)، وفي قائمة نتائج التحليلات، بالإضافة إلى **النص**، حدد **OCR** **ومكبرات الصوت**.

    ![قائمة عرض فهرس الفيديو مع تحديد النسخة المكتوبة وOCR والسماعات](../media/video-indexer-view-menu.png)

1. لاحظ أن جزء **المخطط الزمني** يتضمن الآن:
    - نسخة مكتوبة من السرد الصوتي.
    - النص المرئي في الفيديو.
    - مؤشرات السماعات التي تظهر في الفيديو. يجري التعرّف على بعض الأشخاص المشهورين تلقائياً بالاسم، بينما تجري الإشارة إلى البعض الآخر بالرقم (على سبيل المثال *المتحدث رقم 1*).
1. بدل مرة أخرى إلى **جزء Insights** واعرض نتائج التحليلات التي تظهر هناك. يشمل ذلك ما يلي:
    - الأفراد الذين يظهرون في الفيديو.
    - المواضيع التي جرت مناقشتها في الفيديو.
    - تسميات العناصر التي تظهر في الفيديو.
    - الكيانات المسماة، مثل الأشخاص والعلامات التجارية التي تظهر في الفيديو.
    - المشاهد الرئيسية.
1. مع ظهور جزء **Insights**، حدد رمز **العرض** مرة أخرى، وفي قائمة نتائج التحليلات أضف **الكلمات الأساسية** **والتوجهات** إلى الجزء.

    يمكن أن تساعدك نتائج التحليلات التي جرى العثور عليها في تحديد النُسق الرئيسية في الفيديو. على سبيل المثال، توضح **موضوعات** هذا الفيديو أنه يتعلق بوضوح بالتكنولوجيا والمسؤولية الاجتماعية والأخلاق.

## البحث عن نتائج التحليلات

يمكنك استخدام فهرس الفيديو للبحث في الفيديو عن نتائج التحليلات.

1. في جزء **Insights**، في مربع **البحث**، أدخل *نحلة*. قد تحتاج إلى التمرير لأسفل في جزء Insights لمشاهدة النتائج لجميع أنواع نتائج التحليلات.
1. لاحظ أنه جرى العثور على *علامة* مطابقة واحدة، مع الإشارة إلى موقعها في الفيديو أدناه.
1. حدد بداية القسم الذي يُشار فيه إلى وجود نحلة، وشاهد الفيديو عند هذه النقطة (قد تحتاج إلى إيقاف الفيديو مؤقتاً والاختيار بعناية - تظهر النحلة لفترة وجيزة فقط!)

    ![نتائج بحث فهرس الفيديو عن نحلة](../media/video-indexer-search.png)

1. يمكنك إلغاء تحديد مربع **البحث** لإظهار كافة نتائج التحليلات الخاصة بالفيديو.

## استخدام واجهة برمجة تطبيقات REST لفهرس الفيديو

يوفر فهرس الفيديو واجهة برمجة تطبيقات REST التي يمكنك استخدامها لتحميل مقاطع الفيديو وإدارتها في حسابك.

1. في علامة تبويب جديدة في المتصفح، افتح [مدخل Microsoft Azure](https://portal.azure.com) عبر `https://portal.azure.com`، وسجّل الدخول باستخدام بيانات اعتماد Azure الخاصة بك. اترك علامة التبويب الموجودة الخاصة بمدخل Video Indexer مفتوحة.
1. في مدخل Microsoft Azure، استخدم الزر **[\>_]** الموجود على يمين شريط البحث في أعلى الصفحة لإنشاء جلسة جديدة من Cloud Shell في مدخل Microsoft Azure، وحدد بيئة ***PowerShell*** دون مساحة تخزين في اشتراكك.

    يوفّر Cloud Shell واجهة سطر الأوامر في الجزء الموجود في أسفل بوابة Azure.

    > **ملاحظة**: إذا كنت قد أنشأت مسبقًا Cloud Shell يستخدم بيئة *معالج Bash*، فبدّل إلى ***PowerShell***.

    > **ملاحظة**: إذا طلب منك المدخل تحديد مساحة تخزين للاحتفاظ بملفاتك بشكل دائم، فاختَر **لا يلزم حساب تخزين**، وحدّد الاشتراك الذي تستخدمه ثم اضغط على **تطبيق**.

1. في شريط أدوات Cloud Shell، في قائمة **الإعدادات**، حدد **الانتقال إلى الإصدار الكلاسيكي** (هذا مطلوب لاستخدام محرر التعليمات البرمجية).

    **<font color="red">تأكد من التبديل إلى الإصدار الكلاسيكي من cloud shell قبل المتابعة.</font>**

1. غيِّر حجم جزء cloud shell لعرض مساحة أكبر منه.

    > **تلميح**" يمكنك تغيير حجم الجزء عن طريق سحب الحد العلوي. يمكنك أيضًا استخدام زرَّي التصغير والتكبير للتبديل بين cloud shell والواجهة الرئيسية للمدخل.

1. في جزء Cloud Shell، أدخل الأوامر التالية لنسخ مخزن بيانات GitHub الخاص الذي يحتوي على ملفات التعليمات البرمجية لهذا التدريب (اكتب الأمر أو انسخه إلى الحافظة ثم انقر بزر الماوس الأيمن في سطر الأوامر والصقه كنص عادي):

    ```
    rm -r mslearn-ai-vision -f
    git clone https://github.com/MicrosoftLearning/mslearn-ai-vision
    ```

    > **تلميح**: عند لصق الأوامر في CloudShell، قد يشغل الإخراج مساحة كبيرة من ذاكرة التخزين المؤقت للشاشة. يمكنك مسح الشاشة عن طريق إدخال الأمر `cls` لتسهيل التركيز على كل مهمة.

1. بعد نسخ المستودع، انتقل إلى المجلد الذي يحتوي على ملف التعليمات البرمجية الخاص بهذا التمرين:  

    ```
   cd mslearn-ai-vision/Labfiles/video-indexer
    ```

### الحصول على تفاصيل واجهة برمجة التطبيقات

لاستخدام واجهة برمجة تطبيقات فهرس الفيديو، تحتاج إلى بعض المعلومات لمصادقة الطلبات:

1. في مدخل فهرس الفيديو، عليك توسيع الجزء الأيمن وحدد صفحة **إعدادات الحساب**.
1. لاحظ **معرّف** الحساب على هذه الصفحة - ستحتاج إليه لاحقاً.
1. افتح علامة تبويب جديدة في المتصفح وانتقل إلى [مدخل Video Indexer للمطورين](https://api-portal.videoindexer.ai) عبر `https://api-portal.videoindexer.ai، وسجِّل الدخول باستخدام بيانات اعتماد Azure الخاصة بك.
1. في صفحة **ملف التعريف**، اعرض **الاشتراكات** المقترنة بملف التعريف الخاص بك.
1. في الصفحة التي تحتوي على اشتراكك (اشتراكاتك)، لاحظ أنه جرى تعيين مفتاحين (أساسي وثانوي) لكل اشتراك. ثم حدد **إظهار** لأي من المفاتيح لمشاهدته. ستحتاج إلى هذا المفتاح قريباً.

### استخدام واجهة برمجة تطبيقات REST

الآن بعد أن أصبح لديك معرّف الحساب ومفتاح API، يمكنك استخدام واجهة برمجة تطبيقات REST للعمل مع مقاطع الفيديو في حسابك. في هذا الإجراء، ستستخدم برنامج PowerShell النصي لإجراء مكالمات REST؛ ولكن تنطبق نفس المبادئ مع أدوات HTTP المساعدة مثل cURL أو Postman، أو أي لغة برمجة قادرة على إرسال واستقبال JSON عبر HTTP.

تتبع جميع التفاعلات مع Video Indexer REST API النمط نفسه:

- يجري استخدام طلب أولي لأسلوب **AccessToken** باستخدام مفتاح API في الرأس للحصول على رمز وصول.
- تستخدم الطلبات اللاحقة رمز الوصول للمصادقة عند استدعاء أساليب REST للعمل مع مقاطع الفيديو.

1. في cloud shell، استخدم الأمر التالي لفتح البرنامج النصي لـ PowerShell:

    ```
   code get-videos.ps1
    ```
    
1. في البرنامج النصي PowerShell، استبدل العناصر النائبة **YOUR_ACCOUNT_ID**** YOUR_API_KEY **بمعرّف الحساب وقيم مفتاح واجهة برمجة التطبيقات التي حددتها مسبقاً.
1. لاحظ أن *موقع* الحساب المجاني "تجريبي". إذا أنشئت حساب فهرس فيديو غير مقيد (مع مورد Azure مرتبط)، فيمكنك تغيير هذا إلى الموقع الذي يجري فيه توفير مورد Azure الخاص بك (على سبيل المثال "eastus").
1. راجع التعليمة البرمجية الموجودة في البرنامج النصي، مع ملاحظة أنه يستدعي طريقتين REST: واحدة للحصول على رمز وصول، وأخرى لسرد مقاطع الفيديو في حسابك.
1. احفظ التغييرات (اضغط على *CTRL+S*)، وأغلِق محرر التعليمات البرمجية (اضغط على *CTRL+Q*) ثم شغِّل الأمر التالي لتنفيذ البرنامج النصي:

    ```
   ./get-videos.ps1
    ```
    
1. اعرض استجابة JSON من خدمة REST التي يجب أن تحتوي على تفاصيل **فيديو الذكاء الاصطناعي المسؤول** الذي فهرسته مسبقاً.

## استخدام عناصر واجهة مستخدم فهرس الفيديو

مدخل فهرس الفيديو هو واجهة مفيدة لإدارة مشاريع فهرسة الفيديو. مع ذلك، قد تكون هناك مناسبات تريد فيها إتاحة الفيديو ونتائج تحليلاته للأشخاص الذين ليس لديهم حق الوصول إلى حساب فهرس الفيديو الخاص بك. يوفر فهرس الفيديو عناصر واجهة المستخدم التي يمكنك تضمينها في صفحة ويب لهذا الغرض.

1. استخدم الأمر `ls`، لعرض محتويات المجلد **video-indexer**. لاحظ أن المجلد يحتوي على الملف **analyze-video.html**. هذه صفحة HTML أساسية ستضيف إليها أدوات **مشغل** فهرس الفيديو **وInsights**.
1. أدخِل الأمر التالي لتحرير الملف:

    ```
   code analyze-video.html
    ```

    يتم فتح الملف في محرر التعليمات البرمجية.
   
1. لاحظ الإشارة إلى البرنامج النصي **vb.widgets.mediator.js** في الرأس - يتيح هذا البرنامج النصي لعناصر واجهة مستخدم فهرس الفيديو المتعددة الموجودة على الصفحة التفاعل مع بعضها البعض.
1. في مدخل فهرس الفيديو، ارجع إلى صفحة **ملفات الوسائط** وافتح فيديو **الذكاء الاصطناعي المسؤول**.
1. ضمن مشغل الفيديو، حدد **&lt;/&gt; تضمين** لعرض التعليمات البرمجية HTML iframe لتضمين عناصر واجهة المستخدم.
1. في مربع الحوار **مشاركة وتضمين**، حدد عنصر واجهة المستخدم **Player**، واضبط حجم الفيديو على 560 × 315، ثم انسخ رمز التضمين إلى الحافظة.
1. في cloud shell ضمن مدخل Microsoft Azure، وفي محرر التعليمات البرمجية للملف **analyze-video.html**، الصق التعليمات البرمجية المنسوخة أسفل التعليق **&lt; -- Player widget goes here -- &gt;**.
1. بالعودة إلى مدخل Video Indexer، وفي مربع حوار **المشاركة والتضمين**، حدد عنصر واجهة المستخدم **التحليلات** ثم انسخ التعليمات البرمجية للتضمين إلى الحافظة. بعد ذلك، أغلِق مربع الحوار **المشاركة والتضمين**، وعُد مرة أخرى إلى مدخل Microsoft Azure، والصق التعليمات البرمجية المنسوخة أسفل التعليق **&lt;-- Insights widget goes here -- &gt;**.
1. بعد تحرير الملف، احفظ التغييرات (*CTRL+S*) داخل محرر التعليمات البرمجية ثم أغلِق المحرر (*CTRL+Q*) مع ترك سطر أوامر cloud shell مفتوحًا.
1. في شريط أدوات cloud shell، أدخِل الأمر التالي (المخصص لـ Cloud shell) لتنزيل ملف HTML الذي قمت بتحريره:

    ```
    download analyze-video.html
    ```

    ينشئ أمر التنزيل رابطًا منبثقًا في أسفل يمين متصفحك، يمكنك تحديده لتنزيل الملف وفتحه، ليظهر كما يلي:

    ![عناصر واجهة مستخدم فهرس الفيديو في صفحة ويب](../media/video-indexer-widgets.png)

1. يمكنك تجربة عناصر واجهة المستخدم باستخدام أداة **Insights** للبحث عن نتائج التحليلات والانتقال إليها في الفيديو.

