---
lab:
  title: تصنيف الصور باستخدام نموذج الذكاء الاصطناعي في Azure Vision المخصص
  module: Module 2 - Develop computer vision solutions with Azure AI Vision
---

# تصنيف الصور باستخدام نموذج الذكاء الاصطناعي في Azure Vision المخصص

يمكنك الذكاء الاصطناعي في Azure Vision من تدريب نماذج مخصصة لتصنيف العناصر واكتشافها باستخدام التسميات التي تحددها. في هذا التمرين المعملي، سنبني نموذج تصنيف صور مخصص لتصنيف صور الفاكهة.

## استنساخ المستودع لهذه الدورة التدريبية

إذا لم تكن قد استنسخت بالفعل باستنساخ مستودع التعليمات البرمجية **الذكاء الاصطناعي في Azure Vision** في البيئة التي تعمل فيها في هذا التمرين المعملي، فاتبع هذه الخطوات لتنفيذ بذلك. بخلاف ذلك، افتح المجلد المستنسخ في تعليمة Visual Studio البرمجية.

1. ابدأ تشغيل Visual Studio Code.
2. افتح لوحة (SHIFT+CTRL+P) وشغّل **Git: استنسخ الأمر ** لاستنساخ مستودع `https://github.com/MicrosoftLearning/mslearn-ai-vision` إلى مجلد محلي (لا يُهم أي مجلد).
3. عند استنساخ المستودع، افتح المجلد في تعليمة Visual Studio البرمجية.
4. انتظر حتى تثبيت ملفات إضافية لدعم مشاريع التعليمات البرمجية C# في المستودع.

    > **ملاحظة**: إذا جرت مطالبتك بإضافة الأصول المطلوبة للبناء وتصحيح الأخطاء، فحدد **ليس الآن**. إذا جرت مطالبتك برسالة *اكتشاف مشروع وظيفة Azure في المجلد*، يمكنك إغلاق هذه الرسالة بأمان.

## تزويد موارد Azure

إذا لم يكن لديك بالفعل مورداً في اشتراكك، فسيتعين عليك توفير مورد **خدمات الذكاء الاصطناعي في Azure**.

1. افتح مدخل Azure على `https://portal.azure.com`، وسجل الدخول باستخدام حساب Microsoft المقترن باشتراك Azure.
2. في شريط البحث العلوي، ابحث عن *خدمات الذكاء الاصطناعي في Azure*، وحدد **خدمات الذكاء الاصطناعي في Azure**، وأنشئ مورد حساب متعدد الخدمات لخدمات الذكاء الاصطناعي في Azure بالإعدادات التالية:
    - **Subscription**: *اشتراكك في Azure*
    - **مجموعة الموارد**: *اختر أو أنشئ مجموعة موارد (إذا كنت تستخدم اشتراكاً مقيداً، فقد لا يكون لديك إذن لإنشاء مجموعة موارد جديدة - استخدم المجموعة المتوفرة)*
    - **المنطقة**: *اختر من بين منطقة شرق الولايات المتحدة وأوروبا الغربية وغرب الولايات المتحدة 2\**
    - **الاسم**: *أدخل اسماً فريداً*
    - **مستوى التسعير**: قياسي S0

    \*تتوفر علامات النماذج المخصصة الذكاء الاصطناعي في Azure Vision 4.0 حالياً في هذه المناطق فقط.

3. حدد مربعات الاختيار المطلوبة ثم أنشئ المورد.
<!--4. When the resource has been deployed, go to it and view its **Keys and Endpoint** page. You will need the endpoint and one of the keys from this page in a future step. Save them off or leave this browser tab open.-->

نحتاج أيضاً إلى حساب تخزين لتخزين صور التدريب.

1. في مدخل Microsoft Azure، ابحث عن **حسابات التخزين** وحددها، وأنشئ حساب تخزين جديداً بالإعدادات التالية:
    - **Subscription**: *اشتراكك في Azure*
    - **مجموعة الموارد**: *اختر مجموعة الموارد نفسها التي أنشئت مورد خدمة الذكاء الاصطناعي في Azure بها في*
    - **اسم حساب التخزين**: customclassifySUFFIX 
        - *ملاحظة: استبدل الرمز المميز `SUFFIX` بالأحرف الأولى من اسمك أو قيمة أخرى للتأكد من أن اسم المورد فريد عالمياً.*
    - **المنطقة**: *اختر المنطقة نفسها التي استخدمتها لمورد خدمة الذكاء الاصطناعي في Azure*
    - **الأداء:** قياسي
    - **التكرار**: التخزين المتكرر محلياً (LRS)
1. خلال إنشاء حساب التخزين الخاص بك، انتقل إلى تعليمة Visual studio البرمجية ووسع مجلد **Labfiles/02-image-classification**.
1. في ذلك المجلد، حدد **replace.ps1** وراجع التعليمة البرمجية. سترى أنه يستبدل اسم حساب التخزين الخاص بك للعنصر النائب في ملف JSON (ملف COCO) الذي نستخدمه في خطوة لاحقة. استبدل العنصر النائب *في السطر الأول فقط* من الملف باسم حساب التخزين الخاص بك. حفظ الملف.
1. انقر بزر الماوس الأيمن على المجلد **02-image-classification** وافتح الوحدة الطرفية المتكاملة. قم بتشغيل الأمر التالي.

    ```powershell
    ./replace.ps1
    ```

1. يمكنك مراجعة ملف COCO للتأكد من وجود اسم حساب التخزين الخاص بك. حدد **training-images/training_labels.json** واعرض الإدخالات القليلة الأولى. في الحقل *absolute_url*، يجب أن ترى شيئاً مشابهاً لـ *"https://myStorage.blob.core.windows.net/fruit/...*. إذا لم يكن التغيير متوقعاً، فتأكد من تحديث العنصر النائب الأول فقط في البرنامج النصي PowerShell.
1. أغلق كل من ملف JSON وPowerShell، وارجع إلى نافذة المستعرض لديك.
1. يجب أن يكون حساب التخزين الخاص بك كاملاً. انتقل إلى حساب التخزين الخاص بك.
1. تمكين الوصول العام إلى حساب التخزين. في الجزء الأيمن، انتقل إلى **التكوين** في مجموعة **الإعدادات**، وبوسعك تمكين *السماح بالوصول المجهول لكائن ثنائي كبير الحجم*. حدد **حفظ**
1. في الجزء الأيمن، حدد **الحاويات** وأنشئ حاوية جديدة باسم `fruit`، وحدد **مستوى الوصول المجهول** إلى *الحاوية (وصول مجهول للقراءة للحاويات والكائنات الثنائية كبيرة الحجم)*.

    > **ملاحظة**: إذا تعطل **مستوى الوصول المجهول**، فعليك تحديث صفحة المستعرض.

1. انتقل إلى `fruit`، ويمكنك تحميل الصور (وملف JSON واحد) في **Labfiles/02-image-classification/training-images** إلى تلك الحاوية.

## إنشاء مشروع تدريب نموذج مخصص

بعد ذلك، ستنشئ مشروع تدريب جديد لتصنيف الصور المخصصة في Vision Studio.

1. في مستعرض الويب، انتقل إلى `https://portal.vision.cognitive.azure.com/` وسجل الدخول باستخدام حساب Microsoft حيث أنشأت مورد الذكاء الاصطناعي في Azure.
1. حدد مربع **تخصيص النماذج باستخدام الصور** (يمكن العثور عليه في علامة تبويب **تحليل الصور** إذا لم يكن ظاهراً في طريقة العرض الافتراضية الخاصة بك)، وإذا طُلب منك، حدد مورد الذكاء الاصطناعي في Azure الذي أنشأته.
1. في مشروعك، حدد **إضافة مجموعة بيانات جديدة** في الأعلى. تكوين بالإعدادات التالية:
    - **اسم مجموعة البيانات**: training_images
    - **نوع النموذج**: تصنيف الصور
    - **حدد حاوية تخزين كائن ثنائي كبير الحجم من Azure**: حدد **تحديد حاوية**
        - **Subscription**: *اشتراكك في Azure*
        - **حساب التخزين**: *حساب التخزين الذي أنشأته*
        - **حاوية كائن ثنائي كبير الحجم**: فاكهة
    - حدد المربع "السماح لـ Vision Studio بالقراءة والكتابة في وحدة تخزين الكائن الثنائي الكبير الخاص بك"
1. حدد مجموعة بيانات **training_images**.

في هذه المرحلة من إنشاء المشروع، عادةً ما تحدد إنشاء **مشروع تسمية بيانات Azure ML** وتسمية صورك، ما يؤدي إلى إنشاء ملف COCO. نشجعك على تجربة ذلك إذا كان لديك الوقت، ولكن لأغراض هذا الدرس التطبيقي، سمينا بالفعل الصور لك ووفرنا ملف COCO الناتج.

1. تحديد **إضافة ملف COCO**
1. في القائمة المنسدلة، حدد **استيراد ملف COCO من حاوية كائن ثنائي كبير الحجم**
1. نظرا لأنك قمت بالفعل بتوصيل الحاوية الخاصة بك باسم `fruit`، يبحث Vision Studio عن ملف COCO. حدد **training_labels.json** من القائمة المنسدلة، وأضف ملف COCO.
1. انتقل إلى **النماذج المخصصة** على اليسار، وحدد **تدريب نموذج جديد**. استخدم الإعدادات التالية:
    - **اسم النموذج**: classifyfruit
    - **نوع النموذج**: تصنيف الصور
    - **اختيار مجموعة بيانات التدريب**: training_images
    - اترك الباقي كإعداد افتراضي، ثم حدد **نموذج القطار**

يمكن أن يستغرق التدريب بعض الوقت - الميزانية الافتراضية تصل إلى ساعة، ولكن بالنسبة لمجموعة البيانات الصغيرة هذه عادة ما تكون أسرع بكثير من ذلك. حدد زر **التحديث** كل دقيقتين حتى *نجاح* حالة المهمة. حدد النموذج.

هنا يمكنك عرض أداء وظيفة التدريب. راجع دقة النموذج المدرب وضبطه المحكم.

## تجربة نموذجك المخصص

النموذج الخاص بك مدرب وأصبح جاهزاً للاختبار.

1. في أعلى الصفحة الخاصة بالنموذج المخصص، حدد **تجربته**.
1. حدد نموذج **classifyfruit** من القائمة المنسدلة التي تحدد النموذج الذي تريد استخدامه، ثم انتقل إلى المجلد **02-image-classification\test-images**.
1. حدد كل صورة واعرض النتائج. حدد علامة التبويب **JSON** في مربع النتائج لفحص استجابة JSON الكاملة.

<!-- Option coding example to run-->
## تنظيف الموارد

إذا كنت لا تستخدم موارد Azure التي أنشأتها في هذا المختبر لوحدات التدريب الأخرى، فيمكنك حذفها لتجنب تكبد المزيد من الرسوم.

1. افتح مدخل Azure في `https://portal.azure.com`، وفي شريط البحث العلوي، ابحث عن الموارد التي أنشأتها في هذا المختبر.

2. في صفحة المورد، حدد **حذف** واتبع الإرشادات لحذف المورد. بدلاً من ذلك، يمكنك حذف مجموعة الموارد بأكملها لتنظيف جميع الموارد في الوقت نفسه.
